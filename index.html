<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <title>üçï Sling Fwing ‚Äì Pizza + Sourdough Bread Calculator üçû</title>

  <style>
    body{
      font-family:'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background:#fafafa;
      margin:0;
      padding:16px;
    }
    h1{ font-size:1.6em; margin:0 0 6px 0; }
    h2{ margin:0 0 10px 0; font-size:1.15em; }
    .sub{ color:#555; margin:0 0 14px 0; }
    .card{
      background:#fff;
      padding:14px;
      margin-bottom:14px;
      border-radius:10px;
      box-shadow:0 1px 4px rgba(0,0,0,0.08);
    }
    label{ display:block; margin-top:10px; font-weight:600; }
    input, select{
      width:100%;
      padding:10px;
      margin-top:6px;
      font-size:1em;
      border:1px solid #ddd;
      border-radius:8px;
      box-sizing:border-box;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:6px;
    }
    .row input{ margin-top:0; }
    .row select{ margin-top:0; }
    .tiny{ width:90px; }
    .mid{ width:150px; }
    .colon{ font-weight:800; padding:0 2px; }
    .output{
      margin-top:10px;
      font-size:1.05em;
      line-height:1.45;
    }
    .bigout{
      margin-top:12px;
      padding:12px;
      border-radius:10px;
      background:#f3f4f6;
      font-size:1.25em;
      font-weight:800;
      line-height:1.25;
    }
    .hint{ color:#666; font-size:0.92em; margin-top:8px; }

    .warn{
      margin-top:10px;
      padding:10px;
      border-radius:10px;
      background:#fff7ed;
      border:1px solid #fed7aa;
      color:#7c2d12;
      font-size:0.95em;
      line-height:1.35;
    }
    .ok{
      margin-top:10px;
      padding:10px;
      border-radius:10px;
      background:#f0fdf4;
      border:1px solid #bbf7d0;
      color:#14532d;
      font-size:0.95em;
      line-height:1.35;
    }
    .pill{
      display:inline-block;
      padding:4px 8px;
      border-radius:999px;
      background:#e5e7eb;
      font-size:0.85em;
      font-weight:600;
      margin-right:6px;
    }
    .muted{ color:#6b7280; }
    small{ color:#6b7280; }

    /* Tabs */
    .tabs{
      display:flex;
      gap:10px;
      margin:0 0 14px 0;
    }
    .tabbtn{
      flex:1;
      border:1px solid #ddd;
      background:#fff;
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:800;
      box-shadow:0 1px 3px rgba(0,0,0,0.06);
    }
    .tabbtn.active{
      border-color:#111827;
      box-shadow:0 2px 10px rgba(0,0,0,0.08);
    }
    .tabpane{ display:none; }
    .tabpane.active{ display:block; }
  </style>
</head>

<body>
  <h1>üçï Sling Fwing ‚Äì Pizza + Sourdough Bread Calculator üçû</h1>
  <p class="sub">
    Levain % is <b>levain total weight</b> as % of flour (<b>100% hydration levain</b>).
    Levain flour is always counted inside total flour.
  </p>

  <div class="tabs">
    <button class="tabbtn active" data-tab="pizza">Pizza Party</button>
    <button class="tabbtn" data-tab="bread">Sourdough Bread</button>
  </div>

  <!-- =========================
       PIZZA TAB
  ========================== -->
  <div id="tab-pizza" class="tabpane active">

    <!-- INPUTS -->
    <div class="card">
      <h2>Pizza Dough Inputs</h2>

      <label>Oven size</label>
      <select id="oven">
        <option value="small" selected>Small Ooni (12") ‚Äî realistic 10.5‚Äì11" pizza</option>
        <option value="large">Large Ooni (16") ‚Äî realistic 13.5‚Äì14.5" pizza</option>
      </select>
      <div class="hint" id="ovenHint">‚Äî</div>

      <label>Number of pizzas desired</label>
      <input id="pizzas" type="number" value="50" min="1" step="1">

      <label>Dough weight per pizza (g)</label>
      <input id="doughWeight" type="number" value="200" min="100" step="5">
      <div class="hint">Rule of thumb: <b>Small Ooni 190‚Äì200g</b> ¬∑ <b>Large Ooni 260‚Äì270g</b></div>

      <label>Dough hydration (%) ‚Äî 58‚Äì62% paddock-friendly</label>
      <input id="hydration" type="number" value="60" min="45" max="85" step="0.5">

      <label>Salt (%) ‚Äî usually 2.3% to 2.7%</label>
      <input id="saltPct" type="number" value="2.5" min="0" max="4" step="0.1">

      <label>Levain (%) to flour ratio ‚Äî Pizza same-day often 2‚Äì4%</label>
      <input id="levainPct" type="number" value="3" min="0" max="60" step="0.5">

      <label>Flour split: Type 00 % of total flour (High Grade is the rest)</label>
      <input id="type00Pct" type="number" value="70" min="0" max="100" step="1">

      <label>Air Temperature where dough will sit (¬∞C)</label>
      <input id="doughTemp" type="number" value="24" step="0.5">

      <p class="hint">
        Note: Levain flour is always High Grade. If Type 00 is 100% and levain % &gt; 0, you still need High Grade for the levain.
      </p>
    </div>

    <!-- DOUGH QUANTITIES -->
    <div class="card">
      <h2>Pizza Dough Quantities</h2>
      <div class="output" id="doughOut">‚Äî</div>
    </div>

    <!-- SAUCE & CHEESE -->
    <div class="card">
      <h2>Margherita Baseline (Sauce + Cheese)</h2>

      <label>Pizza build style</label>
      <select id="buildStyle">
        <option value="hand" selected>Hand-stretched (paddock realistic, rimmed)</option>
        <option value="rolled">Rolled / sheeted (home-oven even thickness)</option>
      </select>
      <div class="hint" id="buildHint">‚Äî</div>

      <label>Sauce coverage</label>
      <select id="sauceStyle">
        <option value="light">Light</option>
        <option value="medium" selected>Medium</option>
        <option value="heavy">Heavy</option>
      </select>

      <label>Cheese coverage</label>
      <select id="cheeseStyle">
        <option value="light" selected>Light</option>
        <option value="medium">Medium</option>
        <option value="heavy">Heavy</option>
      </select>

      <label>Tomato can size (g)</label>
      <select id="canSize">
        <option value="400">400 g</option>
        <option value="425" selected>425 g</option>
        <option value="800">800 g</option>
      </select>

      <div class="output" id="margOut">‚Äî</div>
    </div>

    <!-- WHEN TO BAKE -->
    <div class="card">
      <h2>When to Mix & When to Fire</h2>

      <label>Dough process starts at (Autolyse starts here: flour + water only)</label>
      <div class="row">
        <input id="mixHour" class="tiny" type="number" min="1" max="12" value="11">
        <span class="colon">:</span>
        <input id="mixMin" class="tiny" type="number" min="0" max="59" value="30">
        <select id="mixAmPm" class="mid">
          <option value="AM" selected>AM</option>
          <option value="PM">PM</option>
        </select>
      </div>

      <div id="fermentOut" class="bigout">‚Äî</div>
      <div class="hint" id="fermentHint"></div>
    </div>

    <!-- PIZZA WORKFLOW -->
    <div class="card">
      <h2>Pizza Workflow (Same-Day, Paddock-Proof)</h2>

      <label>Autolyse time (minutes) ‚Äî flour + water only</label>
      <input id="autolyseMin" type="number" value="30" min="0" step="5">

      <label>Fold #1 after adding starter+salt (minutes)</label>
      <input id="fold1Min" type="number" value="45" min="15" step="5">

      <label>Fold #2 after Fold #1 (minutes)</label>
      <input id="fold2Min" type="number" value="45" min="15" step="5">

      <label>Relax time after balling (minutes) ‚Äî kills snap-back</label>
      <input id="relaxMin" type="number" value="150" min="60" step="15">

      <div class="output" id="pizzaGuideOut">‚Äî</div>
    </div>

    <!-- STARTER PLANNING -->
    <div class="card">
      <h2>Starter Planning (Levain Build)</h2>

      <label>Air temperature where starter will sit (¬∞C)</label>
      <input id="starterTemp" type="number" value="22" step="0.5">

      <div class="output" id="starterOut">‚Äî</div>
    </div>
  </div>

<!-- =========================
     BREAD TAB (UPDATED)
========================== -->
<div id="tab-bread" class="tabpane">

  <div class="card">
    <h2>Sourdough Bread Inputs</h2>
    <p class="hint">
      Bread mode uses a <b>100% hydration levain</b>.
      Mixed flours boost flavour and fermentation, but too much wholegrain/rye/spelt can weaken structure.
      Coarse semolina (pizza-launch semolina) is supported with warnings + hydration bump.
    </p>

    <label>Recommended flour blend presets</label>
    <select id="breadPreset">
      <option value="custom" selected>Custom (manual)</option>
      <option value="everyday">Everyday Strong (80% white, 15% whole wheat, 5% rye)</option>
      <option value="airy">Airy & Mild (90% white, 10% whole wheat)</option>
      <option value="rustic">Rustic Flavour (75% white, 15% whole wheat, 5% rye, 5% spelt)</option>
      <option value="rye">Rye Kick (70% white, 20% whole wheat, 10% rye)</option>
      <option value="spelt">Spelt Softness (80% white, 10% whole wheat, 10% spelt)</option>
      <option value="italian">Italian Rustic (75% white, 15% whole wheat, 5% rye, 5% semolina)</option>
    </select>

    <label>Number of loaves</label>
    <input id="loaves" type="number" value="2" min="1" step="1">

    <label>Dough weight per loaf (g)</label>
    <input id="loafWeight" type="number" value="900" min="300" step="10">

    <label>Hydration (%)</label>
    <input id="breadHydration" type="number" value="75" min="55" max="90" step="0.5">
    <div class="hint" id="breadHydrationHint">‚Äî</div>

    <label>Salt (%)</label>
    <input id="breadSaltPct" type="number" value="2.1" min="0" max="4" step="0.1">

    <label>Levain (%) to flour ratio (100% hydration levain)</label>
    <input id="breadLevainPct" type="number" value="20" min="0" max="60" step="1">

    <label>Levain flour choice</label>
    <select id="breadLevainFlourMode">
      <option value="white" selected>Use WHITE flour in levain (most reliable rise)</option>
      <option value="blend">Match the dough blend in levain (more flavour, slightly less lift)</option>
    </select>
    <div class="hint">Coarse semolina is <b>never</b> used in levain.</div>

    <label>Flour blend (% of total flour)</label>
    <div class="hint">If they don‚Äôt add to 100%, the calculator normalises them.</div>

    <label>White / Bread flour (%)</label>
    <input id="breadWhitePct" type="number" value="80" min="0" max="100" step="1">

    <label>Whole wheat (%)</label>
    <input id="breadWholePct" type="number" value="15" min="0" max="100" step="1">

    <label>Rye (%)</label>
    <input id="breadRyePct" type="number" value="5" min="0" max="100" step="1">

    <label>Spelt (%)</label>
    <input id="breadSpeltPct" type="number" value="0" min="0" max="100" step="1">

    <label>Coarse semolina (%) ‚Äî pizza-launch semolina</label>
    <input id="breadSemolinaPct" type="number" value="0" min="0" max="100" step="1">
    <div class="hint">Best ‚â§8% unless pre-soaked. Adds chew + golden crust, can feel gritty if pushed.</div>

    <label>Autolyse time (minutes)</label>
    <input id="breadAutolyseMin" type="number" value="30" min="0" step="5">

    <label>Room temperature (¬∞C) for schedule hint</label>
    <input id="breadTemp" type="number" value="22" step="0.5">

    <div class="output" id="breadBlendHint">‚Äî</div>
  </div>

  <div class="card">
    <h2>Bread Quantities</h2>
    <div class="output" id="breadOut">‚Äî</div>
  </div>

  <div class="card">
    <h2>Simple Bread Timeline (Same Day)</h2>

    <label>Mix start time</label>
    <div class="row">
      <input id="breadMixHour" class="tiny" type="number" min="1" max="12" value="9">
      <span class="colon">:</span>
      <input id="breadMixMin" class="tiny" type="number" min="0" max="59" value="0">
      <select id="breadMixAmPm" class="mid">
        <option value="AM" selected>AM</option>
        <option value="PM">PM</option>
      </select>
    </div>

    <div id="breadWindowOut" class="bigout">‚Äî</div>
    <div class="output" id="breadScheduleOut">‚Äî</div>
    <div class="hint">
      Rough guide. Dough is the boss: bubbles + rise + jiggle, not the clock.
    </div>
  </div>
</div>

<script>
  /* IMPORTANT:
     This bread block assumes your file ALREADY defines these helper functions above:
     clamp(), toMinutes(), fmtTime()
     (Your pizza calculator does.)
  */

  function calcBread(){
    const loaves = +loavesEl.value || 0;
    const loafW = +loafWeightEl.value || 0;

    const baseHydration = (+breadHydrationEl.value || 0) / 100;
    const saltPct = (+breadSaltPctEl.value || 0) / 100;
    const levainPct = (+breadLevainPctEl.value || 0) / 100;
    const autolyseMin = clamp(+breadAutolyseMinEl.value || 30, 0, 180);

    // Blend percents (normalise to 100)
    let w  = +breadWhitePctEl.value || 0;
    let ww = +breadWholePctEl.value || 0;
    let rye = +breadRyePctEl.value || 0;
    let sp  = +breadSpeltPctEl.value || 0;
    let sem = +breadSemolinaPctEl.value || 0;

    let sum = w + ww + rye + sp + sem;
    if (sum <= 0) { w = 100; ww = rye = sp = sem = 0; sum = 100; }

    const nw  = w  / sum;
    const nww = ww / sum;
    const nrye = rye / sum;
    const nsp = sp / sum;
    const nsem = sem / sum;

    const semPct = nsem * 100;

    // Auto hydration bump for coarse semolina
    let hydrationAdj = 0;
    if (nsem > 0) hydrationAdj += Math.min(0.04, nsem * 0.5);
    const effectiveHydration = baseHydration + hydrationAdj;

    breadHydrationHint.innerHTML =
      (hydrationAdj > 0)
        ? `Coarse semolina detected ‚Üí auto hydration bump: <b>+${(hydrationAdj*100).toFixed(1)}%</b> (effective: <b>${(effectiveHydration*100).toFixed(1)}%</b>)`
        : `Effective hydration: <b>${(effectiveHydration*100).toFixed(1)}%</b>`;

    const totalDough = loaves * loafW;

    const totalFlourAll = totalDough / (1 + effectiveHydration + saltPct);

    const levainTotal = totalFlourAll * levainPct;   // 100% hydration levain
    const levainFlour = levainTotal / 2;
    const levainWater = levainTotal / 2;

    const waterToAdd = Math.max(0, (totalFlourAll * effectiveHydration) - levainWater);
    const salt = totalFlourAll * saltPct;

    const whiteTotal = totalFlourAll * nw;
    const wholeTotal = totalFlourAll * nww;
    const ryeTotal = totalFlourAll * nrye;
    const speltTotal = totalFlourAll * nsp;
    const semolinaTotal = totalFlourAll * nsem;

    // Levain flour allocation (semolina never in levain)
    const levainMode = breadLevainFlourModeEl.value;
    let levWhite = levainFlour, levWhole = 0, levRye = 0, levSpelt = 0;

    if (levainMode === "blend") {
      const nonSemSum = nw + nww + nrye + nsp;
      const rw  = nonSemSum > 0 ? (nw / nonSemSum) : 1;
      const rww = nonSemSum > 0 ? (nww / nonSemSum) : 0;
      const rrye= nonSemSum > 0 ? (nrye / nonSemSum) : 0;
      const rsp = nonSemSum > 0 ? (nsp / nonSemSum) : 0;

      levWhite = levainFlour * rw;
      levWhole = levainFlour * rww;
      levRye   = levainFlour * rrye;
      levSpelt = levainFlour * rsp;
    }

    const whiteAdd = Math.max(0, whiteTotal - levWhite);
    const wholeAdd = Math.max(0, wholeTotal - levWhole);
    const ryeAdd   = Math.max(0, ryeTotal - levRye);
    const speltAdd = Math.max(0, speltTotal - levSpelt);
    const semolinaAdd = Math.max(0, semolinaTotal);

    const wholeGrainPct = (nww + nrye + nsp) * 100;
    const ryePct = nrye * 100;
    const spPct = nsp * 100;

    let blendAdvice = "";
    let risk = "";

    if (semPct > 0 && semPct <= 5) blendAdvice += "Coarse semolina at low % adds chew + golden crust without harming structure. ";
    if (semPct > 5 && semPct <= 8) blendAdvice += "Noticeable semolina texture‚Äîuse longer autolyse and gentle handling. ";
    if (semPct > 8) { risk = "‚ö†Ô∏è"; blendAdvice += "High coarse semolina‚Äîpre-soak strongly recommended or crumb may feel gritty. "; }

    if (wholeGrainPct <= 10) blendAdvice += "Mild flavour, very strong structure.";
    else if (wholeGrainPct <= 25) blendAdvice += "‚úÖ Sweet spot: flavour + fermentation + strength.";
    else if (wholeGrainPct <= 35) blendAdvice += "More flavour, tighter crumb‚Äîwatch bulk closely.";
    else { risk = "‚ö†Ô∏è"; blendAdvice += "High wholegrain load‚Äîshape earlier, avoid over-proofing."; }

    if (ryePct > 12) { risk = "‚ö†Ô∏è"; blendAdvice += " Rye is high‚Äîgreat flavour, but stickier/weaker gluten."; }
    if (spPct > 15) { risk = "‚ö†Ô∏è"; blendAdvice += " Spelt is high‚Äîvery extensible, handle gently."; }

    let semSoak = "";
    if (semPct > 8) {
      semSoak = `<br><span class="muted"><b>Semolina pre-soak tip:</b> mix semolina with ~2√ó its weight of hot water, cover 1‚Äì2h (or overnight), then add during mixing.</span>`;
    }

    breadBlendHint.innerHTML = `
      <b>${risk} Blend check:</b><br>
      White ${(nw*100).toFixed(0)}% ¬∑ Whole ${(nww*100).toFixed(0)}% ¬∑ Rye ${(nrye*100).toFixed(0)}% ¬∑ Spelt ${(nsp*100).toFixed(0)}% ¬∑ Semolina ${(nsem*100).toFixed(0)}%<br>
      <span class="muted">${blendAdvice}</span>
      ${semSoak}
    `;

    const lp = (+breadLevainPctEl.value || 0);
    let levainHint = "";
    if (lp <= 0) levainHint = "Levain 0% = not sourdough.";
    else if (lp < 10) levainHint = "Low levain = slower, often better flavour if you can wait.";
    else if (lp <= 25) levainHint = "‚úÖ Common bread zone (15‚Äì25%).";
    else levainHint = "High levain = faster, can shorten your window.";

    breadOut.innerHTML = `
      <b>Totals for ${loaves} loaf/loaves</b><br><br>

      <b>Autolyse (optional):</b> mix <b>Flour + Water</b> only, rest <b>${autolyseMin} min</b>.<br><br>

      <b>ADD THIS (bread-friendly order)</b><br>
      <b>1) Water to add:</b> <b>${waterToAdd.toFixed(0)} g</b><br>

      <b>2) Flour to add (split):</b><br>
      ‚Ä¢ White: <b>${whiteAdd.toFixed(0)} g</b><br>
      ‚Ä¢ Whole wheat: <b>${wholeAdd.toFixed(0)} g</b><br>
      ‚Ä¢ Rye: <b>${ryeAdd.toFixed(0)} g</b><br>
      ‚Ä¢ Spelt: <b>${speltAdd.toFixed(0)} g</b><br>
      ‚Ä¢ Semolina (coarse): <b>${semolinaAdd.toFixed(0)} g</b><br>

      <b>3) Levain (100% hydration):</b> <b>${levainTotal.toFixed(0)} g</b><br>
      <b>4) Salt:</b> <b>${salt.toFixed(1)} g</b><br><br>

      <small>
        Total dough: ${(loaves * loafW).toFixed(0)} g ¬∑ Total flour: ${totalFlourAll.toFixed(0)} g ¬∑
        Hydration: ${(baseHydration*100).toFixed(1)}% (effective ${(effectiveHydration*100).toFixed(1)}%) ¬∑
        Salt: ${(saltPct*100).toFixed(1)}% ¬∑ Levain: ${(levainPct*100).toFixed(1)}%<br>
        <span class="muted">${levainHint}</span>
      </small>
    `;

    const temp = +breadTempEl.value || 22;
    const mixHour = clamp(+breadMixHourEl.value || 12, 1, 12);
    const mixMin  = clamp(+breadMixMinEl.value || 0, 0, 59);
    const mixAmPm = breadMixAmPmEl.value || "AM";
    const startAt = toMinutes(mixHour, mixMin, mixAmPm);

    const levainPctNum = (+breadLevainPctEl.value || 0);
    const bulkBase = 4.5 * (20 / Math.max(5, levainPctNum));
    const wholeSpeed = 1 - Math.min(0.18, (wholeGrainPct/100) * 0.25);
    const tempAdj = Math.pow(1.18, (22 - temp) / 2);

    const bulkHours = clamp(bulkBase * wholeSpeed * tempAdj, 2.5, 9.0);

    const bulkEnd = startAt + Math.round((autolyseMin/60 + bulkHours) * 60);
    const benchRestMin = 20;
    const finalProofHours = clamp(1.5 * tempAdj, 1.0, 3.0);
    const bakeAt = bulkEnd + benchRestMin + Math.round(finalProofHours * 60);

    breadWindowOut.innerHTML = `<b>${fmtTime(bakeAt - 30)} ‚Äì ${fmtTime(bakeAt + 30)}</b> <b>BAKE WINDOW</b>`;

    breadScheduleOut.innerHTML = `
      <b>Guide schedule</b><br>
      ‚Ä¢ <b>${fmtTime(startAt)}</b> Start: autolyse (optional) ${autolyseMin} min<br>
      ‚Ä¢ <b>${fmtTime(startAt + autolyseMin)}</b> Add levain + salt, mix to medium development<br>
      ‚Ä¢ <b>${fmtTime(startAt + autolyseMin + 30)}</b> Coil fold #1 (optional)<br>
      ‚Ä¢ <b>${fmtTime(startAt + autolyseMin + 90)}</b> Coil fold #2 (optional)<br>
      ‚Ä¢ <b>${fmtTime(bulkEnd)}</b> Shape (end bulk, aim ~30‚Äì60% rise)<br>
      ‚Ä¢ <b>${fmtTime(bulkEnd + benchRestMin)}</b> Final proof start<br>
      ‚Ä¢ <b>${fmtTime(bakeAt)}</b> Bake (or cold-proof overnight for elite bread)
      <div class="hint">Bulk estimate: ~${bulkHours.toFixed(1)}h at ${temp.toFixed(1)}¬∞C with ${levainPctNum.toFixed(0)}% levain.</div>
    `;
  }

  // Bread elements
  const breadPresetEl = document.getElementById("breadPreset");
  const loavesEl = document.getElementById("loaves");
  const loafWeightEl = document.getElementById("loafWeight");
  const breadHydrationEl = document.getElementById("breadHydration");
  const breadHydrationHint = document.getElementById("breadHydrationHint");
  const breadSaltPctEl = document.getElementById("breadSaltPct");
  const breadLevainPctEl = document.getElementById("breadLevainPct");
  const breadLevainFlourModeEl = document.getElementById("breadLevainFlourMode");

  const breadWhitePctEl = document.getElementById("breadWhitePct");
  const breadWholePctEl = document.getElementById("breadWholePct");
  const breadRyePctEl = document.getElementById("breadRyePct");
  const breadSpeltPctEl = document.getElementById("breadSpeltPct");
  const breadSemolinaPctEl = document.getElementById("breadSemolinaPct");

  const breadAutolyseMinEl = document.getElementById("breadAutolyseMin");
  const breadTempEl = document.getElementById("breadTemp");

  const breadBlendHint = document.getElementById("breadBlendHint");
  const breadOut = document.getElementById("breadOut");

  const breadMixHourEl = document.getElementById("breadMixHour");
  const breadMixMinEl = document.getElementById("breadMixMin");
  const breadMixAmPmEl = document.getElementById("breadMixAmPm");

  const breadWindowOut = document.getElementById("breadWindowOut");
  const breadScheduleOut = document.getElementById("breadScheduleOut");

  function applyBreadPreset(){
    const p = breadPresetEl.value;
    if (p === "custom") return;

    const presets = {
      everyday: { w:80, ww:15, rye:5, sp:0, sem:0 },
      airy:     { w:90, ww:10, rye:0, sp:0, sem:0 },
      rustic:   { w:75, ww:15, rye:5, sp:5, sem:0 },
      rye:      { w:70, ww:20, rye:10, sp:0, sem:0 },
      spelt:    { w:80, ww:10, rye:0, sp:10, sem:0 },
      italian:  { w:75, ww:15, rye:5, sp:0, sem:5 },
    };

    const x = presets[p];
    if (!x) return;

    breadWhitePctEl.value = x.w;
    breadWholePctEl.value = x.ww;
    breadRyePctEl.value = x.rye;
    breadSpeltPctEl.value = x.sp;
    breadSemolinaPctEl.value = x.sem;

    calcBread();
  }

  breadPresetEl.addEventListener("change", applyBreadPreset);

  // Recalc for bread inputs only
  document.querySelectorAll("#tab-bread input, #tab-bread select").forEach(el => {
    el.addEventListener("input", calcBread);
    el.addEventListener("change", calcBread);
  });

  // Initial render
  calcBread();
</script>

</body>
</html>
